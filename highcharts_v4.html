
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-3d.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
<script type="text/javascript" src="../util/messagingUtil.js"></script>
<script type="text/javascript" src="../util/contentUtil.js"></script>

<figure class="highcharts-figure">
    <div id="container"></div>
</figure>

<script>

var _resultName = null;

document.addEventListener('DOMContentLoaded', function () {
            va.messagingUtil.setOnDataReceivedCallback(onDataReceived);
        });

function onDataReceived(resultData) {
    if (!resultData) return;
    _resultName = resultData.resultName;
    tempstring = resultData["columns"][1]["label"]
    console.log("LOOK HERE FOR TEMP VALUE:" + tempstring)
    const selections = va.contentUtil.initializeSelections(resultData);
    console.log(resultData["data"][0])
    const va_data_merge = []
    for (let i = 0; i < 16; i++){
        va_data_merge.push(resultData["data"][i])
    }
    console.log(va_data_merge)
    highchartmaker(tempstring);
}

var data_for_graph = [
            ['Norway', 16],
            ['Germany', 12],
            ['USA', 8],
            ['Sweden', 8],
            ['Netherlands', 8],
            ['ROC', 6],
            ['India', 7],
            ['Canada', 4],
            ['Japan', 3]];

function highchartmaker(column_name, va_data_recieved) {
    
console.log("The Value of Column_Name is:" + column_name)

// let cname = temp;
// // 'corruption_index';

Highcharts.chart('container', {
    chart: {
        type: 'pie',
        options3d: {
            enabled: true,
            alpha: 45
        }
    },
    title: {
        text: 'Beijing 2022 gold medals by country v12',
        align: 'left'
    },
    plotOptions: {
        pie: {
            innerSize: 100,
            depth: 45
        }
    },
    series: [{
        name : column_name,
        data: data_for_graph
    }]
});
}    



</script>>