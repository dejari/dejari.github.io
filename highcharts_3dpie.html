<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-3d.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
<script type="text/javascript" src="util/messagingUtil.js"></script>
<script type="text/javascript" src="util/contentUtil.js"></script>

<figure class="highcharts-figure">
    <div id="container"></div>
</figure>

<script>


let _resultName = null;

function onDataReceived(resultData) {
    if (!resultData) return;

    _resultName = resultData.resultName;
    console.log("LOOK HERE FOR VA DATA")
    console.log(resultData)
    console.log("LOOK HERE FOR COLUMNS")
    console.log(resultData["columns"][1]["label"])
    const selections = va.contentUtil.initializeSelections(resultData);
}

let data_for_graph = [
            ['Norway', 16],
            ['Germany', 12],
            ['USA', 8],
            ['Sweden', 8],
            ['Netherlands', 8],
            ['ROC', 6],
            ['India', 7],
            ['Canada', 4],
            ['Japan', 3]];

let column_name = "Test"

function highchartmaker(column_name) {

Highcharts.chart('container', {
    chart: {
        type: 'pie',
        options3d: {
            enabled: true,
            alpha: 45
        }
    },
    title: {
        text: 'Beijing 2022 gold medals by country v11',
        align: 'left'
    },
    plotOptions: {
        pie: {
            innerSize: 100,
            depth: 45
        }
    },
    series: [{
        name : column_name,
        data: data_for_graph
    }]
});
}            



document.addEventListener('DOMContentLoaded', function () {
            va.messagingUtil.setOnDataReceivedCallback(onDataReceived);
            highchartmaker()
        });
</script>>